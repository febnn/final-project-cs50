{%extends 'layout.html'%} {% block body_class %}task_page{% endblock %} {% block
task %}
<p class="task_title">CREATE TASK</p>
{%endblock %} {% block title %} Add Task {%endblock %} {%block main%}
<form id="create_form" action="/create" method="post">
  <div class="task_container" style="opacity: 1">
    <!-- Task details -->
    <div class="task_details_cont">
      <p class="task_details_title">Task details</p>
      <div class="task_details_btn_cont">
        <img
          src="/static/close_ring_duotone-1.svg"
          alt="close-btn"
          class="task_details_btn_img"
        />
      </div>
    </div>
    <!-- Task name -->
    <div class="task_name_cont">
      <p class="task_name_title">Task name</p>
      <input
        class="task_name_input"
        type="text"
        placeholder="Enter task name"
      />
    </div>
    <!-- Description -->
    <div class="description_cont">
      <p class="description_title">Description</p>
      <textarea
        class="description_textarea"
        name="description"
        id=""
        cols="30"
        rows="10"
        placeholder="Enter a short description"
      ></textarea>
    </div>
    <!-- icon value improvised variable for the form -->
    <input
      type="text"
      name="icon"
      value="/static/schedule-svgrepo-com.svg"
      style="display: none"
      id="icon_value"
    />
    <!-- Icons -->
    <div class="icons_cont">
      <p class="icons_title">Icon</p>

      <div class="icons_flex_cont">
        {%for icon_src in icons%}
        <div id="{{icon_src}}" class="icons">
          <img src="{{icon_src}}" alt="icon" />
        </div>
        {%endfor%}
      </div>
    </div>
    <!-- Status -->
    <div class="status_cont">
      <p class="status_title">Status</p>
      <fieldset id="status" style="border: none">
        <div class="status_flex_cont">
          <!-- In Progress -->

          <div class="status_container">
            <div class="status_in_progress_logo_cont">
              <img
                src="/static/Time_atack_duotone.svg"
                alt="progress-img"
                class="status_in_progress_logo"
              />
            </div>
            <p>In Progress</p>
            <input
              type="radio"
              value="in_progress"
              name="status"
              class="radio_input"
            />
          </div>
          <!-- Completed -->
          <div class="status_container">
            <div class="status_completed_logo_cont">
              <img
                src="/static/Done_round_duotone.svg"
                alt="progress-img"
                class="status_completed_logo"
              />
            </div>
            <p>Completed</p>
            <input
              type="radio"
              value="completed"
              name="status"
              class="radio_input"
            />
          </div>
          <!-- Won't Do -->
          <div class="status_container">
            <div class="status_wont_do_cont">
              <img
                src="/static/close_ring_duotone.svg"
                alt="progress-img"
                class="status_wont_do_logo"
              />
            </div>
            <p>Won't do</p>
            <input
              type="radio"
              value="wont_do"
              name="status"
              class="radio_input"
            />
          </div>
          <!-- DECOY -->
          <div class="decoy">
            <div class="status_wont_do_cont">
              <img
                src="/static/close_ring_duotone.svg"
                alt="progress-img"
                class="status_wont_do_logo"
              />
            </div>
            <p>Won't do</p>
            <input
              type="radio"
              value="wont_do"
              name="status"
              class="radio_input"
            />
          </div>
        </div>
      </fieldset>
    </div>

    <!-- Buttons -->
    <div class="buttons_cont">
      <div class="delete_btn">
        <p>Delete</p>
        <img src="/static/Trash.svg" alt="delete" />
      </div>
      <div class="create_btn" id="submit-btn">
        <p>Save</p>
        <img src="/static/Done_round.svg" alt="delete" />
      </div>
    </div>
  </div>
</form>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    document
      .getElementById("submit-btn")
      .addEventListener("click", function () {
        document.getElementById("create_form").submit();
      });
    const status_conts = document.querySelectorAll(".status_container");
    let radio_checks = document.querySelectorAll(".radio_input");

    let icons = document.querySelectorAll(".icons");

    let icon_value = document.querySelector("#icon_value");

    icons.forEach((icon) => {
      icon.addEventListener("click", () => {
        let icon_src = icon.id;
        icon_value.value = icon.id;
        icon.style.background = "#f5d565";
        icons.forEach((sec) => {
          if (sec.id != icon_src) {
            sec.style.background = "#e3e8ef";
          }
        });
      });
    });

    status_conts.forEach((status, i) => {
      status.addEventListener("click", function select() {
        let index = i;
        radio_checks[index].checked = true;
        status.style.borderColor = "#5d5feb";
        status_conts.forEach((sec, j) => {
          if (index != j) {
            sec.style.borderColor = "#e3e8ef";
          }
        });
      });
    });
  });
</script>

{%endblock%}
